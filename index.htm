<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yasir SIM DATABASE</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
      padding: 40px 15px;
    }
    h1 {
      color: #6f42c1;
      font-weight: 700;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 0 0 5px #b19cd9, 0 0 10px #b19cd9, 0 0 15px #b19cd9;
    }
    .form-box {
      background-color: #ffffff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.08);
      max-width: 500px;
      margin: auto;
    }
    .btn-primary {
      background-color: #6f42c1;
      border: none;
    }
    .btn-primary:hover {
      background-color: #5936a2;
    }
    .btn-whatsapp {
      background-color: #25D366;
      color: white;
      font-weight: bold;
    }
    .response-box {
      background: #ffffff;
      border-radius: 12px;
      margin-top: 30px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.08);
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .record-card {
      background-color: #ffffff;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease-in-out;
    }
    .record-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
    }
    .record-card p {
      margin: 6px 0;
    }
    .footer-note {
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
      color: #6c757d;
    }
  </style>
</head>
<body>

  <h1>Yasir SIM DATABASE</h1>

  <div class="form-box">
    <div class="mb-3">
      <label for="num" class="form-label">Enter Phone Number or CNIC</label>
      <input type="text" class="form-control text-center" id="num" placeholder="e.g. 0315XXXXXXX or CNIC" />
    </div>
    <div class="d-grid gap-2">
      <button id="fetchData" class="btn btn-primary">Search</button>
      <a href="https://wa.me/+923154376814" target="_blank" class="btn btn-whatsapp">Contact on WhatsApp</a>
    </div>
  </div>

  <div id="responseBox" class="response-box mt-4">
    <div id="captureArea"></div>
  </div>

  <div id="shareBtnContainer" class="mt-3 d-grid gap-2" style="max-width: 800px; display: none; margin-left: auto; margin-right: auto;">
    <a id="shareButton" class="btn btn-success" target="_blank">üì§ Share This Data</a>
    <button class="btn btn-secondary" onclick="downloadAsImage()">üì∏ Download as Image</button>
  </div>

  <script>
    document.getElementById("fetchData").addEventListener("click", async function () {
      const num = document.getElementById("num").value.trim();
      const box = document.getElementById("captureArea");
      const shareContainer = document.getElementById("shareBtnContainer");
      const shareButton = document.getElementById("shareButton");
      box.innerHTML = "";
      shareContainer.style.display = "none";

      if (num === "") {
        box.innerHTML = '<div class="alert alert-warning">‚ö†Ô∏è Please enter a valid number or CNIC.</div>';
        return;
      }

      const url = `https://api.allorigins.win/get?url=${encodeURIComponent(`https://freshsimdetails.com/wp-json/sim-search/v1/fetch-data?number=${num}`)}`;
      try {
        const res = await fetch(url);
        const json = await res.json();
        const apiData = JSON.parse(json.contents);
        console.log(apiData);

        if (apiData.number && apiData.name) {
          const data = apiData;
          let content = `
            <div class="record-card">
              <p><strong>üìû Mobile:</strong> ${data.number || "N/A"}</p>
              <p><strong>üë§ Name:</strong> ${data.name || "N/A"}</p>
              <p><strong>üÜî CNIC:</strong> ${data.cnic || "N/A"}</p>
              <p><strong>üè† Address:</strong> ${data.address || "N/A"}</p>
            </div>
            <div class="footer-note">Data Provided by Yasir Tanveer</div>
          `;
          box.innerHTML = content;

          let shareText =
            `SIM Data Results:\n` +
            `üìû ${data.number}\n` +
            `üë§ ${data.name}\n` +
            `üÜî ${data.cnic}\n` +
            `üè† ${data.address}\n\n` +
            `Data Provided by Yasir Tanveer`;

          shareButton.href = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
          shareContainer.style.display = "block";
        } else {
          box.innerHTML = `<div class="alert alert-warning">‚ùå No data found for this input.</div>`;
        }
      } catch (err) {
        box.innerHTML = `<div class="alert alert-danger">‚ùå API Error: ${err.message}</div>`;
      }
    });

    function downloadAsImage() {
      const captureArea = document.getElementById("captureArea");
      html2canvas(captureArea, { scale: 2 }).then((canvas) => {
        const link = document.createElement("a");
        link.download = "sim-data.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    }
  </script>
</body>
</html>
